<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Nuria y Sara | Avatar</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../styles/main.css">
</head>
<body class="avatar-page">

<main>

    <!-- 1. TÍTULO -->
    <h1 class="avatar-title">Nuria y Sara</h1>

    <!-- 2. AVATAR -->
    <div class="avatar-wrapper">
        <img src="../media/avatars/avatar_nuria_sara.png"
             alt="Nuria y Sara"
             class="avatar-img">
    </div>

    <!-- 3. RESPUESTA -->
    <div id="answerContainer" class="avatar-answer-area">
        <p class="placeholder">Selecciona una pregunta.</p>
    </div>

    <!-- 4. PREGUNTAS -->
    <h2>¿Qué quieres preguntar?</h2>
    <div id="questionsContainer"></div>

</main>

<!-- 5. BOTÓN FIJO (NO ES CERRAR) -->
<div style="margin-top:2rem; text-align:center;">
    <a href="../mapa.html"
       class="btn avatar-overlay-close"
       style="text-decoration:none; padding:8px 18px; display:inline-block;">
        Secuencia investigación
    </a>
</div>

<!-- MOTOR DEL JUEGO -->
<script src="../js/engine.js"></script>

<script>
document.addEventListener("DOMContentLoaded", function () {

    /* CARGAR AVATAR */
    if (window.GameEngine && typeof GameEngine.renderAvatar === "function") {
        GameEngine.renderAvatar("nuria_sara", { nodeId: "relacion" });
    }

    const answerContainer = document.getElementById("answerContainer");

    /* GESTIÓN DEL BOTÓN CERRAR DINÁMICO */
    document.addEventListener("click", function (ev) {
        const btn = ev.target;

        // Filtra SOLO botones “Cerrar” generados en las respuestas
        if (
            btn.tagName === "BUTTON" &&
            btn.textContent.trim() === "Cerrar" &&
            btn.id !== "closeOverlayBtn"     // ignorar el botón estático
        ) {
            ev.preventDefault();

            // Eliminamos solamente la respuesta, respetando el placeholder
            const children = Array.from(answerContainer.children);
            children.forEach(ch => {
                if (!ch.classList.contains("placeholder")) {
                    ch.remove();
                }
            });
        }
    });
});
</script>

</body>
</html>
